(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{6373:function(e,t,s){Promise.resolve().then(s.bind(s,5504))},7164:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},8094:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},2513:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9338:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},5636:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]])},5504:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(7437),r=s(2265),n=s(7138),l=s(6648),i=s(6463),o=s(8094),c=s(2513),d=s(5636),x=s(6504),m=s(9966),h=s(2421),p=s(7164),u=s(4446),f=s(1513),g=s(6349),v=s(649);function b(e){var t;let{seasons:s,currentEpisodeId:n,onEpisodeSelect:l}=e,[i,c]=(0,r.useState)((null===(t=s[0])||void 0===t?void 0:t.seasonNumber)||1),d=e=>{c(i===e?0:e)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:["Episodes",(0,a.jsxs)("span",{className:"text-sm font-normal text-text-muted",children:["(",s.reduce((e,t)=>e+t.episodes.length,0)," total)"]})]}),(0,a.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,a.jsxs)("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:[(0,a.jsxs)("button",{onClick:()=>d(e.seasonNumber),className:"w-full flex items-center justify-between p-4 hover:bg-border/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"text-lg font-semibold text-text-primary",children:["Season ",e.seasonNumber]}),(0,a.jsxs)(v.Z,{variant:"outline",size:"sm",children:[e.episodes.length," ",1===e.episodes.length?"Episode":"Episodes"]})]}),(0,a.jsx)(h.Z,{className:(0,g.cn)("w-5 h-5 text-text-muted transition-transform duration-300",i===e.seasonNumber&&"rotate-180")})]}),(0,a.jsx)(u.M,{children:i===e.seasonNumber&&(0,a.jsx)(f.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:(0,a.jsx)("div",{className:"border-t border-border",children:e.episodes.map((t,s)=>{let r="".concat(e.seasonNumber,"-").concat(t.episodeNumber),i=n===r;return(0,a.jsxs)(f.E.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.05*s},className:(0,g.cn)("flex items-center gap-4 p-4 hover:bg-border/30 transition-colors",i&&"bg-primary-gold/10 border-l-4 border-l-primary-gold"),children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-border flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-semibold text-text-muted",children:t.episodeNumber})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-text-primary truncate",children:t.episodeTitle}),t.quality&&(0,a.jsx)("span",{className:"text-xs text-text-muted",children:t.quality})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[t.embedIframeLink&&(0,a.jsx)("button",{onClick:()=>null==l?void 0:l(t,e.seasonNumber),className:(0,g.cn)("p-2.5 rounded-lg transition-all",i?"bg-primary-gold text-background":"bg-border text-text-muted hover:text-primary-gold hover:bg-primary-gold/10"),children:(0,a.jsx)(o.Z,{className:"w-4 h-4 fill-current"})}),t.downloadLink&&(0,a.jsx)("a",{href:t.downloadLink,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-lg bg-border text-text-muted hover:text-secondary-purple hover:bg-secondary-purple/10 transition-all",children:(0,a.jsx)(p.Z,{className:"w-4 h-4"})})]})]},r)})})})})]},e.seasonNumber))})]})}var j=s(1209);function y(){var e,t;let s=(0,i.useParams)(),[h,p]=(0,r.useState)(null),[u,f]=(0,r.useState)([]),[g,v]=(0,r.useState)(!0);(0,r.useEffect)(()=>{s.id&&y()},[s.id]);let y=async()=>{try{let e=await fetch("/api/content/".concat(s.id)),t=await e.json();t.success&&(p(t.data),w(t.data._id))}catch(e){console.error("Failed to fetch series:",e)}finally{v(!1)}},w=async e=>{try{let t=await fetch("/api/content?type=series"),s=await t.json();s.success&&f(s.data.filter(t=>String(t._id)!==e).slice(0,10))}catch(e){console.error("Failed to fetch similar series:",e)}};return g?(0,a.jsxs)("div",{className:"min-h-screen bg-[#141414]",children:[(0,a.jsx)(x.Z,{}),(0,a.jsx)("div",{className:"pt-16",children:(0,a.jsx)("div",{className:"h-[50vh] bg-gray-900 animate-pulse"})})]}):h?(0,a.jsxs)("main",{className:"min-h-screen bg-[#141414]",children:[(0,a.jsx)(x.Z,{}),(0,a.jsxs)("div",{className:"pt-16",children:[(0,a.jsxs)("div",{className:"relative w-full aspect-[16/9] h-auto min-h-[300px] max-h-[500px] overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 w-full h-full",children:[(0,a.jsx)(l.default,{src:h.banner||h.poster,alt:"",fill:!0,className:"object-cover",priority:!0,sizes:"100vw"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-[#141414] via-[#141414]/60 to-transparent"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-[#141414]/40 to-[#141414]"})]}),(0,a.jsx)("div",{className:"relative h-full max-w-7xl mx-auto px-4 md:px-8 flex items-end pb-8 md:pb-12",children:(0,a.jsxs)("div",{className:"max-w-xl lg:max-w-2xl space-y-3 md:space-y-4",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-white drop-shadow-lg",children:h.title}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 text-sm",children:[h.rating&&(0,a.jsxs)("span",{className:"text-green-400 font-semibold",children:[h.rating," Match"]}),h.year&&(0,a.jsx)("span",{className:"text-white/80",children:h.year}),(0,a.jsx)("span",{className:"text-white font-bold bg-purple-600 px-1.5 py-0.5 text-xs rounded",children:"SERIES"}),(0,a.jsxs)("span",{className:"text-white/80",children:[(null===(e=h.seasons)||void 0===e?void 0:e.length)||0," Seasons"]}),(0,a.jsxs)("span",{className:"text-white/60",children:[(null==h?void 0:null===(t=h.seasons)||void 0===t?void 0:t.reduce((e,t)=>{var s;return e+((null===(s=t.episodes)||void 0===s?void 0:s.length)||0)},0))||0," Episodes"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)(n.default,{href:"/series/watch/".concat(String(h._id)),children:(0,a.jsxs)("button",{className:"bg-white text-black hover:bg-white/90 rounded px-5 md:px-7 py-2 md:py-2.5 flex items-center gap-2 font-bold text-sm",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 fill-black"}),"Play"]})}),(0,a.jsx)("button",{className:"bg-gray-500/60 hover:bg-gray-500/80 text-white rounded-full w-9 h-9 flex items-center justify-center transition-colors",children:(0,a.jsx)(c.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{className:"bg-gray-500/60 hover:bg-gray-500/80 text-white rounded-full w-9 h-9 flex items-center justify-center transition-colors",children:(0,a.jsx)(d.Z,{className:"w-4 h-4"})})]}),h.description&&(0,a.jsx)("p",{className:"text-white/90 text-sm md:text-base leading-relaxed line-clamp-2",children:h.description}),h.tags&&h.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:h.tags.map((e,t)=>(0,a.jsx)("span",{className:"px-3 py-1 rounded-full bg-white/10 text-xs text-white/80",children:e},t))})]})})]}),(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-6 sm:py-8",children:h.seasons&&h.seasons.length>0&&(0,a.jsx)(b,{seasons:h.seasons,onEpisodeSelect:(e,t)=>{window.location.href="/series/watch/".concat(null==h?void 0:h._id,"?season=").concat(t,"&episode=").concat(e.episodeNumber)}})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 py-4 sm:py-6",children:u.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-4 sm:mb-6",children:"More Like This"}),(0,a.jsx)(j.Z,{title:"",items:u,isNetflixStyle:!0})]})})]}),(0,a.jsx)(m.Z,{})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-[#141414]",children:[(0,a.jsx)(x.Z,{}),(0,a.jsxs)("div",{className:"pt-32 text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Series not found"}),(0,a.jsx)(n.default,{href:"/",className:"text-red-600 mt-4 inline-block",children:"Go back home"})]})]})}},1209:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(7437),r=s(2265),n=s(336),l=s(256),i=s(8030);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,i.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),c=(0,i.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function d(e){let{title:t,items:s,horizontal:i=!1,isNetflixStyle:d=!1}=e;if(0===s.length)return null;let x=(0,r.useRef)(null),[m,h]=(0,r.useState)(!1),[p,u]=(0,r.useState)(!0),f=()=>{if(x.current){let{scrollLeft:e,scrollWidth:t,clientWidth:s}=x.current;h(e>0),u(e<t-s-10)}};(0,r.useEffect)(()=>{f();let e=x.current;if(e)return e.addEventListener("scroll",f),()=>e.removeEventListener("scroll",f)},[]);let g=e=>{if(x.current){let t=window.innerWidth>=1280?300:window.innerWidth>=768?250:200;x.current.scrollBy({left:"right"===e?t:-t,behavior:"smooth"})}};return d?(0,a.jsx)("section",{className:"py-1 mb-6",children:(0,a.jsxs)("div",{className:"px-4 md:px-6 lg:px-8",children:[t&&(0,a.jsx)("h2",{className:"text-lg md:text-xl lg:text-2xl font-bold text-white mb-2",children:t}),(0,a.jsxs)("div",{className:"relative group",children:[m&&(0,a.jsx)("button",{onClick:()=>g("left"),className:"absolute left-0 top-0 bottom-0 z-10 w-6 md:w-10 bg-black/70 hover:bg-black/90 flex items-center justify-center transition-all opacity-0 group-hover:opacity-100",children:(0,a.jsx)(o,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),(0,a.jsx)("div",{ref:x,className:"flex gap-1.5 md:gap-2 lg:gap-3 overflow-x-auto pb-2 scrollbar-hide scroll-smooth",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:s.map((e,t)=>(0,a.jsx)("div",{className:"flex-shrink-0 w-28 sm:w-32 md:w-36 lg:w-40 xl:w-44",children:"movie"===e.type?(0,a.jsx)(n.Z,{movie:e,index:t}):(0,a.jsx)(l.Z,{series:e,index:t})},String(e._id)))}),p&&(0,a.jsx)("button",{onClick:()=>g("right"),className:"absolute right-0 top-0 bottom-0 z-10 w-6 md:w-10 bg-black/70 hover:bg-black/90 flex items-center justify-center transition-all opacity-0 group-hover:opacity-100",children:(0,a.jsx)(c,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})})]})]})}):i?(0,a.jsx)("section",{className:"py-2",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-white",children:t}),(0,a.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-[#333] to-transparent"})]}),(0,a.jsx)("div",{className:"relative -mx-4 px-4",children:(0,a.jsx)("div",{ref:x,className:"flex gap-1 md:gap-2 overflow-x-auto pb-2 scrollbar-hide snap-x snap-mandatory",children:s.map((e,t)=>(0,a.jsx)("div",{className:"flex-shrink-0 w-28 sm:w-32 md:w-36 lg:w-40 snap-start",children:"movie"===e.type?(0,a.jsx)(n.Z,{movie:e,index:t}):(0,a.jsx)(l.Z,{series:e,index:t})},String(e._id)))})})]})}):(0,a.jsx)("section",{className:"py-2",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-white",children:t}),(0,a.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-[#333] to-transparent"})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-2 md:gap-3",children:s.map((e,t)=>(0,a.jsx)("div",{className:"w-full",children:"movie"===e.type?(0,a.jsx)(n.Z,{movie:e,index:t}):(0,a.jsx)(l.Z,{series:e,index:t})},String(e._id)))})]})})}},336:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(7437),r=s(7138),n=s(6648),l=s(9338);function i(e){let{movie:t,index:s=0}=e;return(0,a.jsx)(r.default,{href:"/movie/".concat(String(t._id)),children:(0,a.jsxs)("div",{className:"group relative aspect-[2/3] rounded overflow-hidden cursor-pointer",children:[(0,a.jsx)(n.default,{src:t.poster,alt:t.title,fill:!0,sizes:"(max-width: 480px) 33vw, (max-width: 640px) 28vw, (max-width: 768px) 22vw, (max-width: 1024px) 18vw, 16vw",loading:"lazy",className:"object-cover transition-transform duration-300 group-hover:scale-105"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:[(0,a.jsx)("h3",{className:"text-xs md:text-sm font-medium text-white truncate",children:t.title}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[t.year&&(0,a.jsx)("span",{className:"text-[10px] md:text-xs text-gray-300",children:t.year}),t.quality&&(0,a.jsx)("span",{className:"text-[9px] md:text-[10px] px-1 py-0.5 bg-[#e50914] text-white rounded",children:t.quality})]})]}),t.rating&&(0,a.jsx)("div",{className:"absolute top-1.5 left-1.5",children:(0,a.jsxs)("span",{className:"text-[10px] md:text-xs px-1 py-0.5 bg-yellow-500/90 text-black font-semibold rounded flex items-center gap-0.5",children:[(0,a.jsx)(l.Z,{className:"w-2.5 h-2.5 fill-current"}),t.rating]})})]})})}},256:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(7437),r=s(7138),n=s(6648),l=s(9338);function i(e){var t;let{series:s,index:i=0}=e,o=(null===(t=s.seasons)||void 0===t?void 0:t.length)||0;return(0,a.jsx)(r.default,{href:"/series/".concat(String(s._id)),children:(0,a.jsxs)("div",{className:"group relative aspect-[2/3] rounded overflow-hidden cursor-pointer",children:[(0,a.jsx)(n.default,{src:s.poster,alt:s.title,fill:!0,sizes:"(max-width: 480px) 33vw, (max-width: 640px) 28vw, (max-width: 768px) 22vw, (max-width: 1024px) 18vw, 16vw",loading:"lazy",className:"object-cover transition-transform duration-300 group-hover:scale-105"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:[(0,a.jsx)("h3",{className:"text-xs md:text-sm font-medium text-white truncate",children:s.title}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[s.year&&(0,a.jsx)("span",{className:"text-[10px] md:text-xs text-gray-300",children:s.year}),o>0&&(0,a.jsxs)("span",{className:"text-[10px] md:text-xs text-gray-300",children:[o," Seasons"]})]})]}),s.rating&&(0,a.jsx)("div",{className:"absolute top-1.5 left-1.5",children:(0,a.jsxs)("span",{className:"text-[10px] md:text-xs px-1 py-0.5 bg-yellow-500/90 text-black font-semibold rounded flex items-center gap-0.5",children:[(0,a.jsx)(l.Z,{className:"w-2.5 h-2.5 fill-current"}),s.rating]})})]})})}},649:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(7437),r=s(6349);function n(e){let{children:t,variant:s="default",size:n="sm",className:l}=e;return(0,a.jsx)("span",{className:(0,r.cn)("inline-flex items-center justify-center rounded font-medium border",{gold:"bg-red-600/20 text-red-500 border-red-600/30",purple:"bg-purple-600/20 text-purple-400 border-purple-600/30",green:"bg-green-600/20 text-green-400 border-green-600/30",default:"bg-gray-800 text-gray-300 border-gray-700",outline:"bg-transparent text-gray-400 border-gray-700"}[s],{sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm"}[n],l),children:t})}},4446:function(e,t,s){"use strict";s.d(t,{M:function(){return g}});var a=s(7437),r=s(2265),n=s(5050),l=s(458),i=s(7797),o=s(9791);class c extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d(e){let{children:t,isPresent:s}=e,n=(0,r.useId)(),l=(0,r.useRef)(null),i=(0,r.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,r.useContext)(o._);return(0,r.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:r}=i.current;if(s||!l.current||!e||!t)return;l.current.dataset.motionPopId=n;let o=document.createElement("style");return d&&(o.nonce=d),document.head.appendChild(o),o.sheet&&o.sheet.insertRule('\n          [data-motion-pop-id="'.concat(n,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(a,"px !important;\n            left: ").concat(r,"px !important;\n          }\n        ")),()=>{document.head.removeChild(o)}},[s]),(0,a.jsx)(c,{isPresent:s,childRef:l,sizeRef:i,children:r.cloneElement(t,{ref:l})})}let x=e=>{let{children:t,initial:s,isPresent:n,onExitComplete:o,custom:c,presenceAffectsLayout:x,mode:h}=e,p=(0,l.h)(m),u=(0,r.useId)(),f=(0,r.useCallback)(e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;o&&o()},[p,o]),g=(0,r.useMemo)(()=>({id:u,initial:s,isPresent:n,custom:c,onExitComplete:f,register:e=>(p.set(e,!1),()=>p.delete(e))}),x?[Math.random(),f]:[n,f]);return(0,r.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[n]),r.useEffect(()=>{n||p.size||!o||o()},[n]),"popLayout"===h&&(t=(0,a.jsx)(d,{isPresent:n,children:t})),(0,a.jsx)(i.O.Provider,{value:g,children:t})};function m(){return new Map}var h=s(3241);let p=e=>e.key||"";function u(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}var f=s(9033);let g=e=>{let{children:t,custom:s,initial:i=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:m=!1}=e,[g,v]=(0,h.oO)(m),b=(0,r.useMemo)(()=>u(t),[t]),j=m&&!g?[]:b.map(p),y=(0,r.useRef)(!0),w=(0,r.useRef)(b),N=(0,l.h)(()=>new Map),[k,Z]=(0,r.useState)(b),[E,S]=(0,r.useState)(b);(0,f.L)(()=>{y.current=!1,w.current=b;for(let e=0;e<E.length;e++){let t=p(E[e]);j.includes(t)?N.delete(t):!0!==N.get(t)&&N.set(t,!1)}},[E,j.length,j.join("-")]);let C=[];if(b!==k){let e=[...b];for(let t=0;t<E.length;t++){let s=E[t],a=p(s);j.includes(a)||(e.splice(t,0,s),C.push(s))}"wait"===d&&C.length&&(e=C),S(u(e)),Z(b);return}let{forceRender:_}=(0,r.useContext)(n.p);return(0,a.jsx)(a.Fragment,{children:E.map(e=>{let t=p(e),r=(!m||!!g)&&(b===E||j.includes(t));return(0,a.jsx)(x,{isPresent:r,initial:(!y.current||!!i)&&void 0,custom:r?void 0:s,presenceAffectsLayout:c,mode:d,onExitComplete:r?void 0:()=>{if(!N.has(t))return;N.set(t,!0);let e=!0;N.forEach(t=>{t||(e=!1)}),e&&(null==_||_(),S(w.current),m&&(null==v||v()),o&&o())},children:e},t)})})}}},function(e){e.O(0,[562,824,792,513,129,971,23,744],function(){return e(e.s=6373)}),_N_E=e.O()}]);