"use strict";(()=>{var e={};e.id=553,e.ids=[553],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1123:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>l});var n={};r.r(n),r.d(n,{GET:()=>d});var o=r(9303),s=r(8716),i=r(670),a=r(7070),u=r(4184),p=r(1150);async function d(e){try{let t=e.headers.get("x-admin-key");if("TELUGUDB123"!==t)return a.NextResponse.json({success:!1,error:"Unauthorized"},{status:401});await (0,u.Z)();let r=await p.Z.countDocuments({type:"movie"}),n=await p.Z.countDocuments({type:"series"}),o=await p.Z.countDocuments({category:"Trending"}),s=(await p.Z.find({type:"series"},{seasons:1})).reduce((e,t)=>e+(t.seasons?.reduce((e,t)=>e+(t.episodes?.length||0),0)||0),0);return a.NextResponse.json({success:!0,stats:{totalMovies:r,totalSeries:n,totalEpisodes:s,trendingCount:o}})}catch(e){return console.error("Error fetching stats:",e),a.NextResponse.json({success:!1,error:"Failed to fetch stats"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/admin/stats/route",pathname:"/api/admin/stats",filename:"route",bundlePath:"app/api/admin/stats/route"},resolvedPagePath:"D:\\downloads\\WatchDB Streaming Platform\\telugudb\\src\\app\\api\\admin\\stats\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:l,serverHooks:g}=c,y="/api/admin/stats/route";function h(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:l})}},4184:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(1185),o=r.n(n);let s="mongodb+srv://Balujeswanth:Baluflix123@cluster0.hqqoxgl.mongodb.net/baluflix?retryWrites=true&w=majority";if(!s)throw Error("Please define the MONGODB_URI environment variable");let i=global.mongoose;i||(i=global.mongoose={conn:null,promise:null});let a=async function(){if(i.conn)return i.conn;i.promise||(i.promise=o().connect(s,{bufferCommands:!1}).then(e=>e));try{i.conn=await i.promise}catch(e){throw i.promise=null,console.error("MongoDB connection error:",e),e}return i.conn}},1150:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(1185),o=r.n(n);let s=new n.Schema({episodeNumber:{type:Number,required:!0},episodeTitle:{type:String,required:!0},embedIframeLink:{type:String},downloadLink:{type:String,required:!0},quality:{type:String}}),i=new n.Schema({seasonNumber:{type:Number,required:!0},episodes:[s]}),a=new n.Schema({type:{type:String,required:!0,enum:["movie","series"]},title:{type:String,required:!0},poster:{type:String,required:!0},banner:{type:String},description:{type:String},year:{type:String},language:{type:String},category:{type:String},quality:{type:String},rating:{type:Number},tags:[{type:String}],embedIframeLink:{type:String},downloadLink:{type:String},seasons:[i]},{timestamps:!0}),u=o().models.Content||o().model("Content",a)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,972],()=>r(1123));module.exports=n})();